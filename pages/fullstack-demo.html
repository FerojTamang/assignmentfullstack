<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Manager</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom Styles -->
    <style>
        :root {
            --primary-orange: #ff7f00;
            --dark-orange: #d76a20;
            --primary-navy: #001f3f;
            --neu-bg: #e0e5ec;
            --neu-shadow-out: 6px 6px 12px rgba(163,177,198,0.6);
            --neu-shadow-in: -6px -6px 12px rgba(255,255,255,0.5);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: 1px solid rgba(255, 255, 255, 0.2);
        }
        body {
            background: linear-gradient(135deg, var(--primary-orange), var(--primary-navy));
            min-height: 100vh;
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            position: relative;
            margin: 0;
            padding: 0;
        }
        #particles-js {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }
        .navbar {
            background: var(--primary-navy);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            opacity: 0;
            animation: slideInDown 0.5s ease-out forwards;
        }
        .navbar-brand, .nav-link {
            color: #ffffff !important;
            font-weight: 600;
            transition: all 0.3s ease;
            opacity: 0;
            animation: fadeIn 0.5s ease-out forwards;
        }
        .navbar-brand {
            animation-delay: 0.1s;
        }
        .nav-link {
            animation-delay: calc(0.2s + var(--delay));
        }
        .nav-link:hover {
            color: var(--primary-orange) !important;
            transform: scale(1.1);
            text-shadow: 0 0 10px rgba(255,127,0,0.5);
        }
        .nav-link.active {
            color: var(--primary-orange) !important;
            border-bottom: 2px solid var(--primary-orange);
        }
        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(255,127,0,0.9)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }
        .container {
            max-width: 1200px;
            margin-top: 60px;
            padding: 0 15px;
            position: relative;
            z-index: 1;
        }
        .card {
            border: none;
            border-radius: 20px;
            background: var(--neu-bg);
            box-shadow: var(--neu-shadow-out), var(--neu-shadow-in);
            padding: 30px;
            margin-bottom: 30px;
            opacity: 0;
            animation: slideInUp 0.5s ease-out forwards;
        }
        h1, h2 {
            color: #ffffff;
            text-align: center;
            font-weight: 700;
            text-shadow: 0 2px 5px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            opacity: 0;
            animation: fadeInDown 0.5s ease-out forwards;
            font-size: 2.5rem;
        }
        .introduction, .data-flow {
            color: #ffffff;
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: var(--glass-bg);
            border: var(--glass-border);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            opacity: 0;
            animation: zoomIn 0.5s ease-out forwards;
        }
        .introduction {
            animation-delay: 0.1s;
        }
        .data-flow {
            background: rgba(255, 127, 0, 0.2);
            animation-delay: 0.2s;
        }
        .form-floating > .form-control:focus ~ label,
        .form-floating > .form-control:not(:placeholder-shown) ~ label {
            color: var(--primary-orange);
            transform: scale(0.85) translateY(-0.5rem) translateX(1.5rem);
            background: transparent;
            padding: 0 0.2rem;
            position: absolute;
            top: -25px;
            left: 0;
            z-index: 0;
        }
        .form-floating > .form-control {
            padding-left: 1.5rem;
            height: calc(3.5rem + 2px);
            color: #000000;
            z-index: 1;
            border-radius: 50px;
            background: var(--neu-bg);
            box-shadow: inset 4px 4px 8px rgba(163,177,198,0.6), inset -4px -4px 8px rgba(255,255,255,0.5);
            transition: all 0.3s ease;
        }
        .form-floating > .form-control:focus {
            z-index: 2;
            box-shadow: inset 6px 6px 12px rgba(163,177,198,0.6), inset -6px -6px 12px rgba(255,255,255,0.5);
            transform: scale(1.02);
            border: 2px solid var(--primary-orange);
            outline: none;
        }
        .btn-primary {
            background: linear-gradient(90deg, var(--primary-orange), #ff4500);
            border: none;
            border-radius: 50px;
            padding: 12px 24px;
            font-weight: 600;
            color: white;
            transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
            box-shadow: var(--neu-shadow-out), var(--neu-shadow-in);
            animation: pulse 2s infinite;
        }
        .btn-primary:hover {
            background: var(--dark-orange);
            transform: translateY(-3px);
            box-shadow: 8px 8px 16px rgba(163,177,198,0.6), -8px -8px 16px rgba(255,255,255,0.5);
            color: white;
        }
        .btn-info {
            background: linear-gradient(90deg, var(--primary-navy), #004080);
            border: none;
            border-radius: 50px;
            padding: 12px 24px;
            font-weight: 600;
            color: white;
            transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
            box-shadow: var(--neu-shadow-out), var(--neu-shadow-in);
            animation: pulse 2s infinite;
        }
        .btn-info:hover {
            background: var(--dark-orange);
            transform: translateY(-3px);
            box-shadow: 8px 8px 16px rgba(163,177,198,0.6), -8px -8px 16px rgba(255,255,255,0.5);
            color: white;
        }
        .table-container {
            background: var(--neu-bg);
            border-radius: 20px;
            box-shadow: var(--neu-shadow-out), var(--neu-shadow-in);
            padding: 20px;
            margin-bottom: 30px;
            opacity: 0;
            animation: slideInUp 0.5s ease-out forwards;
        }
        .table {
            background: #ffffff;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .table thead {
            background: var(--primary-navy);
            color: #ffffff;
        }
        .table th, .table td {
            padding: 15px;
            vertical-align: middle;
            text-align: center;
        }
        .table tbody tr {
            transition: background 0.3s ease;
        }
        .table tbody tr:nth-child(even) {
            background: #f8f9fa;
        }
        .table tbody tr:hover {
            background: rgba(255, 127, 0, 0.1);
            transform: translateY(-2px);
        }
        .table .btn {
            border-radius: 10px;
            padding: 8px 15px;
        }
        #statusMessage {
            text-align: center;
            font-weight: 600;
            color: #ffffff;
            background: var(--glass-bg);
            border: var(--glass-border);
            backdrop-filter: blur(10px);
            padding: 10px;
            border-radius: 20px;
            margin: 20px 0;
            opacity: 0;
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        /* FIXED MODAL STYLES */
        .modal {
            z-index: 9999 !important; /* Ensure modal is on top */
        }
        .modal-backdrop {
            z-index: 9998 !important; /* Backdrop below modal but above everything else */
        }
        .modal-content {
            border-radius: 20px;
            background: var(--neu-bg);
            box-shadow: var(--neu-shadow-out), var(--neu-shadow-in);
            animation: zoomIn 0.3s ease-in;
            position: relative;
            z-index: 10000;
        }
        .modal-header {
            background: var(--primary-navy);
            color: white;
            border-radius: 20px 20px 0 0;
            border-bottom: none;
        }
        .modal-title {
            color: white;
            font-weight: 600;
        }
        .btn-close {
            filter: invert(1);
        }
        .modal-footer {
            border-top: 1px solid rgba(0,0,0,0.125);
            border-radius: 0 0 20px 20px;
        }
        
        .carousel-inner img {
            border-radius: 20px;
            box-shadow: var(--neu-shadow-out), var(--neu-shadow-in);
            object-fit: cover;
            height: 400px;
            opacity: 0;
            animation: zoomIn 0.5s ease-in-out forwards;
        }
        .carousel-item {
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .carousel-control-prev, .carousel-control-next {
            background: var(--glass-bg);
            border: var(--glass-border);
            backdrop-filter: blur(10px);
            width: 10%;
            border-radius: 20px;
            transition: background 0.3s ease;
        }
        .carousel-control-prev:hover, .carousel-control-next:hover {
            background: rgba(255, 127, 0, 0.3);
        }
        body {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="10" fill="%23ff7f00" opacity="0.5"/></svg>') 16 16, auto;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    </style>
</head>
<body>
<div id="particles-js"></div>
<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark sticky-top">
    <div class="container">
        <a class="navbar-brand animate__animated animate__bounceIn" href="../index.html">
            <i class="bi bi-code-slash"></i> Full Stack Assignment
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link animate__animated animate__fadeInDown" href="../pages/html-demo.html"><i class="bi bi-filetype-html"></i> HTML Demo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link animate__animated animate__fadeInDown" style="animation-delay: 0.2s;" href="../pages/css-demo.html"><i class="bi bi-filetype-css"></i> CSS Demo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link animate__animated animate__fadeInDown" style="animation-delay: 0.4s;" href="../pages/javascript-demo.html"><i class="bi bi-filetype-js"></i> JS Demo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link animate__animated animate__fadeInDown" style="animation-delay: 0.6s;" href="../pages/bootstrap-demo.html"><i class="bi bi-bootstrap"></i> Bootstrap Demo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link animate__animated animate__fadeInDown active" style="animation-delay: 0.8s;" href="full-stack-demo.html"><i class="bi bi-database"></i> Full Stack Demo</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container">
    <h1 class="mt-5">Full-Stack Development Demo: Student Manager</h1>
    
    <!-- Introduction Section -->
    <div class="introduction" id="home">
        <h2>What is Full-Stack Development?</h2>
        <p>Full-stack development refers to the practice of building both the front-end (client-side) and back-end (server-side) components of a web application. A full-stack developer is proficient in handling databases, servers, systems engineering, and client-facing interfaces, allowing them to create complete, functional applications from start to finish.</p>
        <p>Below is a demonstration of the full functionality of a full-stack application. When you enter the data in the form, it is temporarily saved in the frontend (using JavaScript for validation and handling). Upon clicking the submit button, the data is sent to the backend database (powered by Supabase) for permanent storage. You can also view, edit, and manage student records, showcasing seamless integration between frontend and backend.</p>
    </div>
    
    <!-- Carousel for Frontend, Backend, Database -->
    <div id="fullStackCarousel" class="carousel slide mb-5" data-bs-ride="carousel" data-bs-interval="3000">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="../img/full.png" class="d-block w-100" alt="Full Stack Integration">
            </div>
            <div class="carousel-item">
                <img src="../img/front.webp" class="d-block w-100" alt="Frontend">
            </div>
            <div class="carousel-item">
                <img src="../img/back.webp" class="d-block w-100" alt="Backend">
            </div>
            <div class="carousel-item">
                <img src="../img/database.png" class="d-block w-100" alt="Database">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#fullStackCarousel" data-bs-slide="prev" aria-label="Previous slide">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#fullStackCarousel" data-bs-slide="next" aria-label="Next slide">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    
    <!-- Data Flow Demonstration Section -->
    <div class="data-flow">
        <h2>How Data is Sent and Fetched in This Full-Stack Demo</h2>
        <p>1. <strong>Frontend Input:</strong> You enter student details in the form below. JavaScript temporarily holds and validates the data in the browser (frontend).</p>
        <p>2. <strong>Submit Action:</strong> When you click "Add Student", the data is sent via an API call (using Supabase JavaScript client) to the backend server.</p>
        <p>3. <strong>Backend Processing:</strong> The backend (Supabase) receives the data, processes it, and inserts it into the PostgreSQL database.</p>
        <p>4. <strong>Fetching Data:</strong> Clicking "Show Students" triggers another API call to fetch records from the database, which are then displayed in the table on the frontend.</p>
        <p>5. <strong>Editing/Updating:</strong> Edit modal sends updated data back to the database via API, demonstrating full CRUD (Create, Read, Update, Delete) operations.</p>
        <p>This flow ensures data moves seamlessly between frontend, backend, and database, making the app dynamic and interactive!</p>
    </div>
    
    <h1 id="studentRecords" class="mt-5">Student Records</h1>
    <div class="card">
        <form id="studentForm" class="p-3">
            <div class="form-floating mb-3 position-relative">
                <input type="text" class="form-control" id="name" placeholder="Student Name" required aria-label="Student Name" autocomplete="name">
                <label for="name">Student Name *</label>
                <div id="nameError" class="text-danger mt-1" style="display:none;"></div>
            </div>
            <div class="form-floating mb-3 position-relative">
                <input type="number" class="form-control" id="age" placeholder="Student Age" required min="1" max="100" aria-label="Student Age" autocomplete="age">
                <label for="age">Student Age *</label>
                <div id="ageError" class="text-danger mt-1" style="display:none;"></div>
            </div>
            <div class="form-floating mb-3 position-relative">
                <input type="text" class="form-control" id="school" placeholder="School Name" aria-label="School Name" autocomplete="organization">
                <label for="school">School Name</label>
                <div id="schoolError" class="text-danger mt-1" style="display:none;"></div>
            </div>
            <div class="form-floating mb-3 position-relative">
                <input type="text" class="form-control" id="college" placeholder="College Name" required aria-label="College Name" autocomplete="organization">
                <label for="college">College Name *</label>
                <div id="collegeError" class="text-danger mt-1" style="display:none;"></div>
            </div>
            <div class="form-floating mb-3 position-relative">
                <input type="text" class="form-control" id="course" placeholder="Course Name" required aria-label="Course Name" autocomplete="educational-course">
                <label for="course">Course Name *</label>
                <div id="courseError" class="text-danger mt-1" style="display:none;"></div>
            </div>
            <button type="submit" class="btn btn-primary d-block mx-auto" id="submitButton" aria-label="Add Student"><i class="fas fa-plus"></i> Add Student</button>
        </form>
    </div>

    <div id="statusMessage"></div>
    <button id="showStudents" class="btn btn-info mb-3 d-block mx-auto" aria-label="Show Students"><i class="fas fa-list"></i> Show Students</button>
    <div class="table-container">
        <table class="table table-bordered" id="studentTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Age</th>
                    <th>School</th>
                    <th>College</th>
                    <th>Course</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="studentList"></tbody>
        </table>
    </div>

    <!-- Edit Modal - FIXED -->
    <div class="modal fade" id="editStudentModal" tabindex="-1" aria-labelledby="editStudentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editStudentModalLabel">Edit Student</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editStudentForm">
                        <input type="hidden" id="editId">
                        <div class="form-floating mb-3 position-relative">
                            <input type="text" class="form-control" id="editName" placeholder="Student Name" required aria-label="Student Name" autocomplete="off">
                            <label for="editName">Student Name *</label>
                            <div id="editNameError" class="text-danger mt-1" style="display:none;"></div>
                        </div>
                        <div class="form-floating mb-3 position-relative">
                            <input type="number" class="form-control" id="editAge" placeholder="Student Age" required min="1" max="100" aria-label="Student Age" autocomplete="off">
                            <label for="editAge">Student Age *</label>
                            <div id="editAgeError" class="text-danger mt-1" style="display:none;"></div>
                        </div>
                        <div class="form-floating mb-3 position-relative">
                            <input type="text" class="form-control" id="editSchool" placeholder="School Name" aria-label="School Name" autocomplete="off">
                            <label for="editSchool">School Name</label>
                            <div id="editSchoolError" class="text-danger mt-1" style="display:none;"></div>
                        </div>
                        <div class="form-floating mb-3 position-relative">
                            <input type="text" class="form-control" id="editCollege" placeholder="College Name" required aria-label="College Name" autocomplete="off">
                            <label for="editCollege">College Name *</label>
                            <div id="editCollegeError" class="text-danger mt-1" style="display:none;"></div>
                        </div>
                        <div class="form-floating mb-3 position-relative">
                            <input type="text" class="form-control" id="editCourse" placeholder="Course Name" required aria-label="Course Name" autocomplete="off">
                            <label for="editCourse">Course Name *</label>
                            <div id="editCourseError" class="text-danger mt-1" style="display:none;"></div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close">Close</button>
                    <button class="btn btn-primary" id="saveEditButton" aria-label="Save Changes"><i class="fas fa-save"></i> Save Changes</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Particles JS -->
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>
    particlesJS('particles-js', {
        "particles": {
            "number": {"value": 60, "density": {"enable": true, "value_area": 1000}},
            "color": {"value": "#ffffff"},
            "shape": {"type": "circle"},
            "opacity": {"value": 0.4, "random": true},
            "size": {"value": 3, "random": true},
            "line_linked": {"enable": true, "distance": 150, "color": "#ffffff", "opacity": 0.3, "width": 1},
            "move": {"enable": true, "speed": 4, "direction": "none", "random": false, "straight": false, "out_mode": "out", "bounce": false}
        },
        "interactivity": {
            "detect_on": "canvas",
            "events": {"onhover": {"enable": true, "mode": "repulse"}, "onclick": {"enable": true, "mode": "push"}, "resize": true},
            "modes": {"repulse": {"distance": 150, "duration": 0.4}, "push": {"particles_nb": 3}}
        },
        "retina_detect": true
    });
</script>
<!-- Supabase JS -->
<script type="module" src="../js/supabase.js"></script>
<!-- Custom Script -->
<script type="module" src="../js/script.js"></script>
</body>





</html>


<script type="module">
// Inline version of your key functionality
document.getElementById('showStudents').addEventListener('click', () => {
    console.log('Show students clicked - inline script working');
    const studentList = document.getElementById('studentList');
    studentList.innerHTML = `
        <tr>
            <td>Test Student</td>
            <td>25</td>
            <td>Test School</td>
            <td>Test College</td>
            <td>Test Course</td>
            <td>
                <button class="btn btn-sm btn-warning me-2 edit-btn" 
                        data-id="1" 
                        data-name="Test Student" 
                        data-age="25">
                    Edit
                </button>
            </td>
        </tr>
    `;
});

// Test edit functionality
document.getElementById('studentList').addEventListener('click', (e) => {
    if (e.target.closest('.edit-btn')) {
        console.log('Edit button clicked - modal should open');
        const modal = new bootstrap.Modal(document.getElementById('editStudentModal'));
        modal.show();
    }
});
</script>