<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Manager</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="../assets/css/fullstack-demo.css">
</head>
<body>
<div id="particles-js"></div>
<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-dark sticky-top">
    <div class="container">
        <a class="navbar-brand animate__animated animate__bounceIn" href="../index.html">
            <i class="bi bi-code-slash"></i> Full Stack Assignment
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link animate__animated animate__fadeInDown" href="../pages/html-demo.html"><i class="bi bi-filetype-html"></i> HTML Demo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link animate__animated animate__fadeInDown" style="animation-delay: 0.2s;" href="../pages/css-demo.html"><i class="bi bi-filetype-css"></i> CSS Demo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link animate__animated animate__fadeInDown" style="animation-delay: 0.4s;" href="../pages/javascript-demo.html"><i class="bi bi-filetype-js"></i> JS Demo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link animate__animated animate__fadeInDown" style="animation-delay: 0.6s;" href="../pages/bootstrap-demo.html"><i class="bi bi-bootstrap"></i> Bootstrap Demo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link animate__animated animate__fadeInDown active" style="animation-delay: 0.8s;" href="full-stack-demo.html"><i class="bi bi-database"></i> Full Stack Demo</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container">
    <h1 class="mt-5">Full-Stack Development Demo: Student Manager</h1>
    
    <!-- Introduction Section -->
    <div class="introduction" id="home">
        <h2>What is Full-Stack Development?</h2>
        <p>Full-stack development refers to the practice of building both the front-end (client-side) and back-end (server-side) components of a web application. A full-stack developer is proficient in handling databases, servers, systems engineering, and client-facing interfaces, allowing them to create complete, functional applications from start to finish.</p>
        <p>Below is a demonstration of the full functionality of a full-stack application. When you enter the data in the form, it is temporarily saved in the frontend (using JavaScript for validation and handling). Upon clicking the submit button, the data is sent to the backend database (powered by Supabase) for permanent storage. You can also view, edit, and manage student records, showcasing seamless integration between frontend and backend.</p>
    </div>
    
    <!-- Carousel for Frontend, Backend, Database -->
    <div id="fullStackCarousel" class="carousel slide mb-5" data-bs-ride="carousel" data-bs-interval="3000">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="../img/full.png" class="d-block w-100" alt="Full Stack Integration">
            </div>
            <div class="carousel-item">
                <img src="../img/front.webp" class="d-block w-100" alt="Frontend">
            </div>
            <div class="carousel-item">
                <img src="../img/back.webp" class="d-block w-100" alt="Backend">
            </div>
            <div class="carousel-item">
                <img src="../img/database.png" class="d-block w-100" alt="Database">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#fullStackCarousel" data-bs-slide="prev" aria-label="Previous slide">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#fullStackCarousel" data-bs-slide="next" aria-label="Next slide">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    
    <!-- Data Flow Demonstration Section -->
    <div class="data-flow">
        <h2>How Data is Sent and Fetched in This Full-Stack Demo</h2>
        <p>1. <strong>Frontend Input:</strong> You enter student details in the form below. JavaScript temporarily holds and validates the data in the browser (frontend).</p>
        <p>2. <strong>Submit Action:</strong> When you click "Add Student", the data is sent via an API call (using Supabase JavaScript client) to the backend server.</p>
        <p>3. <strong>Backend Processing:</strong> The backend (Supabase) receives the data, processes it, and inserts it into the PostgreSQL database.</p>
        <p>4. <strong>Fetching Data:</strong> Clicking "Show Students" triggers another API call to fetch records from the database, which are then displayed in the table on the frontend.</p>
        <p>5. <strong>Editing/Updating:</strong> Edit modal sends updated data back to the database via API, demonstrating full CRUD (Create, Read, Update, Delete) operations.</p>
        <p>This flow ensures data moves seamlessly between frontend, backend, and database, making the app dynamic and interactive!</p>
    </div>

    <!-- Student Record Form -->
    <h1 id="studentRecords" class="mt-5">Student Records</h1>
    <div class="card">
        <form id="studentForm" class="p-3">
            <div class="form-floating mb-3 position-relative">
                <input type="text" class="form-control" id="name" placeholder="Student Name" required aria-label="Student Name" autocomplete="name">
                <label for="name">Student Name *</label>
                <div id="nameError" class="text-danger mt-1" style="display:none;"></div>
            </div>
            <div class="form-floating mb-3 position-relative">
                <input type="number" class="form-control" id="age" placeholder="Student Age" required min="1" max="100" aria-label="Student Age" autocomplete="age">
                <label for="age">Student Age *</label>
                <div id="ageError" class="text-danger mt-1" style="display:none;"></div>
            </div>
            <div class="form-floating mb-3 position-relative">
                <input type="text" class="form-control" id="school" placeholder="School Name" aria-label="School Name" autocomplete="organization">
                <label for="school">School Name</label>
                <div id="schoolError" class="text-danger mt-1" style="display:none;"></div>
            </div>
            <div class="form-floating mb-3 position-relative">
                <input type="text" class="form-control" id="college" placeholder="College Name" required aria-label="College Name" autocomplete="organization">
                <label for="college">College Name *</label>
                <div id="collegeError" class="text-danger mt-1" style="display:none;"></div>
            </div>
            <div class="form-floating mb-3 position-relative">
                <input type="text" class="form-control" id="course" placeholder="Course Name" required aria-label="Course Name" autocomplete="educational-course">
                <label for="course">Course Name *</label>
                <div id="courseError" class="text-danger mt-1" style="display:none;"></div>
            </div>
            <button type="submit" class="btn btn-primary d-block mx-auto" id="submitButton" aria-label="Add Student"><i class="fas fa-plus"></i> Add Student</button>
        </form>
    </div>

    <!-- Student table -->
    <div id="statusMessage"></div>
    <button id="showStudents" class="btn btn-info mb-3 d-block mx-auto" aria-label="Show Students"><i class="fas fa-list"></i> Show Students</button>
    <div class="table-container">
        <div class="table-responsive">
            <table class="table table-bordered" id="studentTable">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Age</th>
                        <th>School</th>
                        <th>College</th>
                        <th>Course</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="studentList"></tbody>
            </table>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal fade" id="editStudentModal" tabindex="-1" aria-labelledby="editStudentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editStudentModalLabel">Edit Student</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editStudentForm">
                        <input type="hidden" id="editId">
                        <div class="form-floating mb-3 position-relative">
                            <input type="text" class="form-control" id="editName" placeholder="Student Name" required aria-label="Student Name" autocomplete="off">
                            <label for="editName">Student Name *</label>
                            <div id="editNameError" class="text-danger mt-1" style="display:none;"></div>
                        </div>
                        <div class="form-floating mb-3 position-relative">
                            <input type="number" class="form-control" id="editAge" placeholder="Student Age" required min="1" max="100" aria-label="Student Age" autocomplete="off">
                            <label for="editAge">Student Age *</label>
                            <div id="editAgeError" class="text-danger mt-1" style="display:none;"></div>
                        </div>
                        <div class="form-floating mb-3 position-relative">
                            <input type="text" class="form-control" id="editSchool" placeholder="School Name" aria-label="School Name" autocomplete="off">
                            <label for="editSchool">School Name</label>
                            <div id="editSchoolError" class="text-danger mt-1" style="display:none;"></div>
                        </div>
                        <div class="form-floating mb-3 position-relative">
                            <input type="text" class="form-control" id="editCollege" placeholder="College Name" required aria-label="College Name" autocomplete="off">
                            <label for="editCollege">College Name *</label>
                            <div id="editCollegeError" class="text-danger mt-1" style="display:none;"></div>
                        </div>
                        <div class="form-floating mb-3 position-relative">
                            <input type="text" class="form-control" id="editCourse" placeholder="Course Name" required aria-label="Course Name" autocomplete="off">
                            <label for="editCourse">Course Name *</label>
                            <div id="editCourseError" class="text-danger mt-1" style="display:none;"></div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal" aria-label="Close">Close</button>
                    <button class="btn btn-primary" id="saveEditButton" aria-label="Save Changes"><i class="fas fa-save"></i> Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <footer align="center" style="background-color: white; color: #1C2526;">
        <p>&copy; Developed by <b>Feroj Tamang</b> - FullStack demo page © 2025</p>
    </footer>

    <!-- Custom Notification -->
    <div id="customNotification" class="alert alert-success d-none" role="alert" style="position: fixed; top: 20px; right: 20px; z-index: 1100;">
        <span id="notificationMessage"></span>
        <button type="button" class="btn-close" aria-label="Close" onclick="document.getElementById('customNotification').classList.add('d-none')"></button>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Particles JS -->
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>
    particlesJS('particles-js', {
        "particles": {
            "number": {"value": 60, "density": {"enable": true, "value_area": 1000}},
            "color": {"value": "#ffffff"},
            "shape": {"type": "circle"},
            "opacity": {"value": 0.4, "random": true},
            "size": {"value": 3, "random": true},
            "line_linked": {"enable": true, "distance": 150, "color": "#ffffff", "opacity": 0.3, "width": 1},
            "move": {"enable": true, "speed": 4, "direction": "none", "random": false, "straight": false, "out_mode": "out", "bounce": false}
        },
        "interactivity": {
            "detect_on": "canvas",
            "events": {"onhover": {"enable": true, "mode": "repulse"}, "onclick": {"enable": true, "mode": "push"}, "resize": true},
            "modes": {"repulse": {"distance": 150, "duration": 0.4}, "push": {"particles_nb": 3}}
        },
        "retina_detect": true
    });
</script>
<!-- Supabase JS -->
<script type="module" src="../js/supabase.js"></script>
<!-- Custom Script -->
<script type="module" src="../js/script.js"></script>
</body>
</html>